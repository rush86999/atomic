"use strict";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || (function () {
    var ownKeys = function(o) {
        ownKeys = Object.getOwnPropertyNames || function (o) {
            var ar = [];
            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;
            return ar;
        };
        return ownKeys(o);
    };
    return function (mod) {
        if (mod && mod.__esModule) return mod;
        var result = {};
        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== "default") __createBinding(result, mod, k[i]);
        __setModuleDefault(result, mod);
        return result;
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = __importStar(require("react"));
const gdriveSkills_1 = require("../../../src/skills/gdriveSkills"); // Adjusted path
// --- Component Definition ---
const GDriveManager = () => {
    // --- State Variables ---
    const [userId, setUserId] = (0, react_1.useState)("test-user-123"); // Placeholder, replace with actual user ID from context/props
    const [connectionStatus, setConnectionStatus] = (0, react_1.useState)(null);
    const [isLoadingStatus, setIsLoadingStatus] = (0, react_1.useState)(true);
    const [files, setFiles] = (0, react_1.useState)([]);
    const [currentFolderId, setCurrentFolderId] = (0, react_1.useState)(undefined); // undefined for root
    const [nextPageToken, setNextPageToken] = (0, react_1.useState)(undefined);
    const [isLoadingFiles, setIsLoadingFiles] = (0, react_1.useState)(false);
    const [pathHistory, setPathHistory] = (0, react_1.useState)([{ name: "My Drive", id: undefined }]);
    const [errorMessages, setErrorMessages] = (0, react_1.useState)({});
    // API functions are now imported from gdriveSkills.ts
    // Mock functions below are removed.
    const fetchConnectionStatus = (0, react_1.useCallback)(async () => {
        if (!userId)
            return;
        setIsLoadingStatus(true);
        setErrorMessages(prev => ({ ...prev, status: undefined }));
        try {
            const response = await (0, gdriveSkills_1.getGDriveConnectionStatus)(userId);
            if (response.ok && response.data) {
                setConnectionStatus(response.data);
            }
            else {
                setConnectionStatus({ isConnected: false, reason: response.error?.message || 'Failed to get status' });
                setErrorMessages(prev => ({ ...prev, status: response.error?.message || 'Failed to get status' }));
            }
        }
        catch (error) {
            setConnectionStatus({ isConnected: false, reason: 'Exception while fetching status' });
            setErrorMessages(prev => ({ ...prev, status: error.message || 'Exception while fetching status' }));
        }
        finally {
            setIsLoadingStatus(false);
        }
    }, [userId]);
    const handleConnectGDrive = () => {
        if (!userId) {
            setErrorMessages(prev => ({ ...prev, general: "User ID is missing. Cannot initiate connection." }));
            return;
        }
        // This will be a redirect to the backend OAuth initiation URL
        // The backend will then redirect to Google, and Google will redirect back to a callback URL.
        // Ensure this callback URL eventually leads the user back to this settings page,
        // perhaps with query params indicating success/failure.
        window.location.href = `/api/auth/gdrive/initiate?user_id=${userId}`;
    };
    const handleDisconnectGDrive = (0, react_1.useCallback)(async () => {
        if (!userId)
            return;
        // Optionally, add a confirmation dialog here
        setErrorMessages(prev => ({ ...prev, general: undefined }));
        try {
            const response = await (0, gdriveSkills_1.disconnectGDrive)(userId);
            if (response.ok) {
                await fetchConnectionStatus(); // Refresh status
                setFiles([]);
                setNextPageToken(undefined);
                setCurrentFolderId(undefined);
                setPathHistory([{ name: "My Drive", id: undefined }]);
            }
            else {
                setErrorMessages(prev => ({ ...prev, general: response.error?.message || 'Failed to disconnect' }));
            }
        }
        catch (error) {
            setErrorMessages(prev => ({ ...prev, general: error.message || 'Exception during disconnect' }));
        }
    }, [userId, fetchConnectionStatus]);
    const fetchFiles = (0, react_1.useCallback)(async (targetFolderId, pageToken, isLoadMore = false) => {
        if (!userId || !connectionStatus?.isConnected)
            return;
        setIsLoadingFiles(true);
        if (!isLoadMore) { // If not loading more, it's a new folder or refresh
            setFiles([]); // Clear previous files for the new folder
            setErrorMessages(prev => ({ ...prev, files: undefined }));
        }
        try {
            const response = await (0, gdriveSkills_1.listGoogleDriveFiles)(userId, targetFolderId, pageToken, undefined, 20); // pageSize 20 example
            if (response.ok && response.data) {
                const newFiles = response.data.files.map((f) => ({ ...f, isIngesting: false, ingestionStatus: null, ingestionMessage: undefined }));
                setFiles(prev => isLoadMore ? [...prev, ...newFiles] : newFiles);
                setNextPageToken(response.data.nextPageToken);
            }
            else {
                setErrorMessages(prev => ({ ...prev, files: response.error?.message || 'Failed to load files' }));
                if (!isLoadMore)
                    setFiles([]); // Clear files on error if it was a fresh load
            }
        }
        catch (error) {
            setErrorMessages(prev => ({ ...prev, files: error.message || 'Exception while loading files' }));
            if (!isLoadMore)
                setFiles([]);
        }
        finally {
            setIsLoadingFiles(false);
        }
    }, [userId, connectionStatus?.isConnected]); // Removed 'files' from dep array to prevent loops on setFiles within
    const handleIngestFile = (0, react_1.useCallback)(async (file) => {
        if (!userId)
            return;
        setFiles(prevFiles => prevFiles.map(f => f.id === file.id ? { ...f, isIngesting: true, ingestionStatus: null, ingestionMessage: undefined } : f));
        setErrorMessages(prev => ({ ...prev, general: undefined }));
        try {
            // The webViewLink might not be available from list-files.
            // If it's crucial for ingestion (e.g. as source_uri),
            // it might need to be fetched via getGoogleDriveFileMetadata first,
            // or the backend's /api/ingest-gdrive-document needs to be robust enough
            // to construct a source_uri from just the file ID if webViewLink is missing.
            // For this conceptual step, we assume originalFileMetadata can be constructed adequately.
            const metadataForIngestion = {
                name: file.name,
                mimeType: file.mimeType,
                webViewLink: file.webViewLink || undefined, // Pass webViewLink if available
            };
            const response = await (0, gdriveSkills_1.triggerGoogleDriveFileIngestion)(userId, file.id, metadataForIngestion);
            if (response.ok) {
                setFiles(prevFiles => prevFiles.map(f => f.id === file.id ? { ...f, isIngesting: false, ingestionStatus: 'success', ingestionMessage: 'Ingestion started.' } : f));
            }
            else {
                setFiles(prevFiles => prevFiles.map(f => f.id === file.id ? { ...f, isIngesting: false, ingestionStatus: 'error', ingestionMessage: response.error?.message || "Ingestion failed." } : f));
            }
        }
        catch (error) {
            setFiles(prevFiles => prevFiles.map(f => f.id === file.id ? { ...f, isIngesting: false, ingestionStatus: 'error', ingestionMessage: error.message || "Exception during ingestion." } : f));
        }
    }, [userId]);
    // --- Effect Hooks ---
    (0, react_1.useEffect)(() => {
        // Fetch initial connection status when userId is available
        if (userId) {
            fetchConnectionStatus();
        }
    }, [userId, fetchConnectionStatus]);
    (0, react_1.useEffect)(() => {
        // Fetch files when connection is established or currentFolderId changes
        if (connectionStatus?.isConnected && userId) {
            fetchFiles(currentFolderId, undefined, false); // false for isLoadMore indicates new folder load
        }
        else if (!connectionStatus?.isConnected) { // Clear files if connection is lost or not present
            setFiles([]);
            setNextPageToken(undefined);
            setPathHistory([{ name: "My Drive", id: undefined }]);
        }
        // Dependency: fetchFiles is useCallback wrapped.
    }, [connectionStatus?.isConnected, currentFolderId, userId, fetchFiles]);
    // --- Event Handlers ---
    const handleFileClick = (file) => {
        if (file.mimeType === 'application/vnd.google-apps.folder') {
            // Navigate into folder
            // Avoid adding duplicate if path already exists (e.g. user clicks back then forward)
            const existingPathItem = pathHistory.find(p => p.id === file.id);
            if (existingPathItem) {
                const existingIndex = pathHistory.findIndex(p => p.id === file.id);
                setPathHistory(prev => prev.slice(0, existingIndex + 1));
            }
            else {
                setPathHistory(prev => [...prev, { id: file.id, name: file.name }]);
            }
            setCurrentFolderId(file.id);
            // fetchFiles will be triggered by useEffect watching currentFolderId
        }
        else {
            // Potentially show file details or context menu for non-folder items
            console.log("Selected file (non-folder):", file.name);
            // Could add logic here to select the file for an action like "view details"
        }
    };
    const handleBreadcrumbClick = (index) => {
        const newPath = pathHistory.slice(0, index + 1);
        setPathHistory(newPath);
        setCurrentFolderId(pathHistory[index].id);
        // fetchFiles will be triggered by useEffect watching currentFolderId
    };
    // handleConnectGDrive, handleDisconnectGDrive, handleIngestFile are already defined with API logic.
    // --- Render Logic (Basic Structure with Placeholders and Comments) ---
    return ((0, jsx_runtime_1.jsxs)("div", { style: { fontFamily: 'Arial, sans-serif', padding: '20px', maxWidth: '800px', margin: 'auto', border: '1px solid #e0e0e0', borderRadius: '8px', boxShadow: '0 2px 4px rgba(0,0,0,0.1)' }, children: [(0, jsx_runtime_1.jsx)("h2", { style: { borderBottom: '1px solid #eee', paddingBottom: '10px', marginBottom: '20px' }, children: "Google Drive Management" }), errorMessages.general && ((0, jsx_runtime_1.jsxs)("p", { style: { color: 'red', backgroundColor: '#ffebee', padding: '10px', borderRadius: '4px', border: '1px solid #e57373', marginBottom: '15px' }, children: [(0, jsx_runtime_1.jsx)("strong", { children: "Error:" }), " ", errorMessages.general] })), (0, jsx_runtime_1.jsxs)("div", { style: { marginBottom: '20px', padding: '15px', border: '1px solid #ccc', borderRadius: '5px', backgroundColor: '#f9f9f9' }, children: [(0, jsx_runtime_1.jsx)("h3", { style: { marginTop: '0', marginBottom: '10px', borderBottom: '1px solid #eee', paddingBottom: '8px' }, children: "Connection Status" }), isLoadingStatus ? ((0, jsx_runtime_1.jsx)("p", { children: "Loading status..." })) : connectionStatus?.isConnected ? ((0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsxs)("p", { style: { color: 'green', fontWeight: 'bold', marginBottom: '10px' }, children: ["Connected as: ", connectionStatus.email || 'N/A'] }), (0, jsx_runtime_1.jsx)("button", { onClick: handleDisconnectGDrive, style: {
                                    padding: '8px 15px',
                                    backgroundColor: '#f44336', // Red
                                    color: 'white',
                                    border: 'none',
                                    borderRadius: '4px',
                                    cursor: 'pointer',
                                    fontSize: '0.9em'
                                }, children: "Disconnect Google Drive" })] })) : ((0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsxs)("p", { style: { color: '#f57c00', fontWeight: 'bold', marginBottom: '5px' }, children: [" ", "Not Connected."] }), connectionStatus?.reason && ((0, jsx_runtime_1.jsxs)("p", { style: { fontSize: '0.9em', color: '#757575', marginTop: '0', marginBottom: '10px' }, children: ["Reason: ", connectionStatus.reason] })), errorMessages.status && ((0, jsx_runtime_1.jsxs)("p", { style: { color: 'red', fontSize: '0.9em', marginTop: '0', marginBottom: '10px' }, children: ["Error fetching status: ", errorMessages.status] })), (0, jsx_runtime_1.jsx)("button", { onClick: handleConnectGDrive, style: {
                                    padding: '8px 15px',
                                    backgroundColor: '#4CAF50', // Green
                                    color: 'white',
                                    border: 'none',
                                    borderRadius: '4px',
                                    cursor: 'pointer',
                                    fontSize: '0.9em'
                                }, children: "Connect Google Drive" })] }))] }), connectionStatus?.isConnected && ((0, jsx_runtime_1.jsxs)("div", { style: { marginTop: '20px', padding: '15px', border: '1px solid #ccc', borderRadius: '5px', backgroundColor: '#f9f9f9' }, children: [(0, jsx_runtime_1.jsx)("h3", { style: { marginTop: '0', marginBottom: '10px', borderBottom: '1px solid #eee', paddingBottom: '8px' }, children: "Files and Folders" }), (0, jsx_runtime_1.jsx)("div", { style: { marginBottom: '10px', padding: '8px', backgroundColor: '#f0f0f0', borderRadius: '4px', display: 'flex', flexWrap: 'wrap', alignItems: 'center' }, children: pathHistory.map((p, index) => ((0, jsx_runtime_1.jsxs)(react_1.default.Fragment, { children: [(0, jsx_runtime_1.jsx)("button", { onClick: () => handleBreadcrumbClick(index), disabled: index === pathHistory.length - 1, style: {
                                        background: 'none', border: 'none',
                                        color: index === pathHistory.length - 1 ? '#333' : '#007bff',
                                        cursor: index === pathHistory.length - 1 ? 'default' : 'pointer',
                                        padding: '2px 0', // Adjusted padding
                                        marginRight: '5px',
                                        fontWeight: index === pathHistory.length - 1 ? 'bold' : 'normal',
                                        textDecoration: index !== pathHistory.length - 1 ? 'underline' : 'none',
                                        fontSize: '0.95em'
                                    }, children: p.name }), index < pathHistory.length - 1 && (0, jsx_runtime_1.jsx)("span", { style: { margin: '0 5px', color: '#666' }, children: "/" })] }, p.id || 'root-breadcrumb'))) }), errorMessages.files && ((0, jsx_runtime_1.jsxs)("p", { style: { color: 'red', backgroundColor: '#ffebee', padding: '10px', borderRadius: '4px', border: '1px solid #e57373', marginBottom: '10px' }, children: [(0, jsx_runtime_1.jsx)("strong", { children: "Error loading files:" }), " ", errorMessages.files] })), isLoadingFiles && files.length === 0 ? ((0, jsx_runtime_1.jsx)("p", { children: "Loading files..." })) : files.length === 0 && !isLoadingFiles ? ((0, jsx_runtime_1.jsx)("p", { style: { fontStyle: 'italic', color: '#757575', padding: '10px 0' }, children: "No files or folders found in this location." })) : ((0, jsx_runtime_1.jsx)("ul", { style: { listStyleType: 'none', paddingLeft: '0', margin: '0' }, children: files.map(file => ((0, jsx_runtime_1.jsxs)("li", { style: {
                                padding: '10px 5px',
                                borderBottom: '1px solid #eee',
                                display: 'flex',
                                justifyContent: 'space-between',
                                alignItems: 'center',
                                cursor: file.mimeType === 'application/vnd.google-apps.folder' ? 'pointer' : 'default',
                            }, onClick: () => {
                                if (file.mimeType === 'application/vnd.google-apps.folder') {
                                    handleFileClick(file);
                                }
                            }, title: file.mimeType === 'application/vnd.google-apps.folder' ? `Open folder: ${file.name}` : `File: ${file.name}`, children: [(0, jsx_runtime_1.jsxs)("span", { style: { flexGrow: 1, display: 'flex', alignItems: 'center' }, children: [(0, jsx_runtime_1.jsx)("span", { style: { marginRight: '8px', fontSize: '1.1em' }, children: file.mimeType === 'application/vnd.google-apps.folder' ? 'ðŸ“' : 'ðŸ“„' }), file.name] }), file.mimeType !== 'application/vnd.google-apps.folder' && ((0, jsx_runtime_1.jsxs)("div", { style: { display: 'flex', alignItems: 'center', flexShrink: 0 }, children: [(0, jsx_runtime_1.jsx)("button", { onClick: (e) => { e.stopPropagation(); handleIngestFile(file); }, disabled: file.isIngesting || file.ingestionStatus === 'success', style: {
                                                padding: '6px 10px',
                                                marginLeft: '10px',
                                                backgroundColor: file.ingestionStatus === 'success' ? '#a5d6a7' : (file.isIngesting ? '#64b5f6' : '#007bff'),
                                                color: 'white',
                                                border: 'none',
                                                borderRadius: '4px',
                                                cursor: (file.isIngesting || file.ingestionStatus === 'success') ? 'default' : 'pointer',
                                                fontSize: '0.9em'
                                            }, children: file.isIngesting ? 'Ingesting...' : (file.ingestionStatus === 'success' ? 'Ingested' : 'Ingest') }), file.ingestionStatus === 'error' && (0, jsx_runtime_1.jsxs)("small", { style: { color: 'red', marginLeft: '8px', fontSize: '0.85em' }, children: ["Error: ", file.ingestionMessage] }), file.ingestionStatus === 'success' && !file.isIngesting && (0, jsx_runtime_1.jsx)("small", { style: { color: 'green', marginLeft: '8px', fontSize: '0.85em' }, children: file.ingestionMessage })] }))] }, file.id))) })), nextPageToken && !isLoadingFiles && ((0, jsx_runtime_1.jsx)("div", { style: { marginTop: '15px', textAlign: 'center' }, children: (0, jsx_runtime_1.jsx)("button", { onClick: () => fetchFiles(currentFolderId, nextPageToken, true), style: {
                                padding: '8px 15px',
                                backgroundColor: '#6c757d',
                                color: 'white',
                                border: 'none',
                                borderRadius: '4px',
                                cursor: 'pointer',
                                fontSize: '0.9em'
                            }, children: "Load More" }) })), isLoadingFiles && files.length > 0 && (0, jsx_runtime_1.jsx)("p", { style: { marginTop: '10px', fontStyle: 'italic', color: '#757575', textAlign: 'center' }, children: "Loading more files..." })] }))] }));
};
exports.default = GDriveManager;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiR0RyaXZlTWFuYWdlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIkdEcml2ZU1hbmFnZXIudHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLCtDQUFnRTtBQUVoRSxtRUFPMEMsQ0FBQyxnQkFBZ0I7QUFrQjNELCtCQUErQjtBQUMvQixNQUFNLGFBQWEsR0FBYSxHQUFHLEVBQUU7SUFDbkMsMEJBQTBCO0lBQzFCLE1BQU0sQ0FBQyxNQUFNLEVBQUUsU0FBUyxDQUFDLEdBQUcsSUFBQSxnQkFBUSxFQUFnQixlQUFlLENBQUMsQ0FBQyxDQUFDLDhEQUE4RDtJQUNwSSxNQUFNLENBQUMsZ0JBQWdCLEVBQUUsbUJBQW1CLENBQUMsR0FBRyxJQUFBLGdCQUFRLEVBQW9DLElBQUksQ0FBQyxDQUFDO0lBQ2xHLE1BQU0sQ0FBQyxlQUFlLEVBQUUsa0JBQWtCLENBQUMsR0FBRyxJQUFBLGdCQUFRLEVBQVUsSUFBSSxDQUFDLENBQUM7SUFFdEUsTUFBTSxDQUFDLEtBQUssRUFBRSxRQUFRLENBQUMsR0FBRyxJQUFBLGdCQUFRLEVBQWlCLEVBQUUsQ0FBQyxDQUFDO0lBQ3ZELE1BQU0sQ0FBQyxlQUFlLEVBQUUsa0JBQWtCLENBQUMsR0FBRyxJQUFBLGdCQUFRLEVBQXFCLFNBQVMsQ0FBQyxDQUFDLENBQUMscUJBQXFCO0lBQzVHLE1BQU0sQ0FBQyxhQUFhLEVBQUUsZ0JBQWdCLENBQUMsR0FBRyxJQUFBLGdCQUFRLEVBQXFCLFNBQVMsQ0FBQyxDQUFDO0lBQ2xGLE1BQU0sQ0FBQyxjQUFjLEVBQUUsaUJBQWlCLENBQUMsR0FBRyxJQUFBLGdCQUFRLEVBQVUsS0FBSyxDQUFDLENBQUM7SUFDckUsTUFBTSxDQUFDLFdBQVcsRUFBRSxjQUFjLENBQUMsR0FBRyxJQUFBLGdCQUFRLEVBQW9CLENBQUMsRUFBRSxJQUFJLEVBQUUsVUFBVSxFQUFFLEVBQUUsRUFBRSxTQUFTLEVBQUUsQ0FBQyxD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RUFBRSxTQUFTLEVBQUUsU0FBUyxFQUFFLFFBQVEsRUFBQyxzQ0FBMkIsSUFDdkosQ0FDUCxJQUNHLENBQ1AsQ0FBQztBQUNKLENBQUMsQ0FBQztBQUVGLGtCQUFlLGFBQWEsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0LCB1c2VDYWxsYmFjayB9IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IHtcbiAgZ2V0R0RyaXZlQ29ubmVjdGlvblN0YXR1cyxcbiAgZGlzY29ubmVjdEdEcml2ZSxcbiAgbGlzdEdvb2dsZURyaXZlRmlsZXMsXG4gIHRyaWdnZXJHb29nbGVEcml2ZUZpbGVJbmdlc3Rpb24sXG4gIEdEcml2ZUNvbm5lY3Rpb25TdGF0dXNJbmZvLCAvLyBJbXBvcnQgdHlwZVxuICBHb29nbGVEcml2ZUZpbGUgYXMgR0RyaXZlRmlsZVR5cGUgLy8gSW1wb3J0IHR5cGUgYW5kIGFsaWFzIHRvIGF2b2lkIGNvbmZsaWN0IGlmIGRlZmluZWQgbG9jYWxseVxufSBmcm9tICcuLi8uLi8uLi9zcmMvc2tpbGxzL2dkcml2ZVNraWxscyc7IC8vIEFkanVzdGVkIHBhdGhcblxuLy8gLS0tIFR5cGUgRGVmaW5pdGlvbnMgKHBsYWNlaG9sZGVycywgaWRlYWxseSBmcm9tIGEgc2hhcmVkIHR5cGVzIGZpbGUpIC0tLVxuLy8gR0RyaXZlQ29ubmVjdGlvblN0YXR1c0luZm8gaXMgbm93IGltcG9ydGVkXG4vLyBHRHJpdmVGaWxlIChyZW5hbWVkIHRvIEdEcml2ZUZpbGVUeXBlKSBpcyBub3cgaW1wb3J0ZWRcblxuLy8gVXNlIEdEcml2ZUZpbGVUeXBlIGZvciBpbnRlcm5hbCBGaWxlTGlzdEl0ZW1cbmludGVyZmFjZSBGaWxlTGlzdEl0ZW0gZXh0ZW5kcyBHRHJpdmVGaWxlVHlwZSB7XG4gIGlzSW5nZXN0aW5nPzogYm9vbGVhbjtcbiAgaW5nZXN0aW9uU3RhdHVzPzogJ3N1Y2Nlc3MnIHwgJ2Vycm9yJyB8IG51bGw7XG4gIGluZ2VzdGlvbk1lc3NhZ2U/OiBzdHJpbmc7XG59XG5cbmludGVyZmFjZSBQYXRoSGlzdG9yeUl0ZW0ge1xuICBpZD86IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xufVxuXG4vLyAtLS0gQ29tcG9uZW50IERlZmluaXRpb24gLS0tXG5jb25zdCBHRHJpdmVNYW5hZ2VyOiBSZWFjdC5GQyA9ICgpID0+IHtcbiAgLy8gLS0tIFN0YXRlIFZhcmlhYmxlcyAtLS1cbiAgY29uc3QgW3VzZXJJZCwgc2V0VXNlcklkXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KFwidGVzdC11c2VyLTEyM1wiKTsgLy8gUGxhY2Vob2xkZXIsIHJlcGxhY2Ugd2l0aCBhY3R1YWwgdXNlciBJRCBmcm9tIGNvbnRleHQvcHJvcHNcbiAgY29uc3QgW2Nvbm5lY3Rpb25TdGF0dXMsIHNldENvbm5lY3Rpb25TdGF0dXNdID0gdXNlU3RhdGU8R0RyaXZlQ29ubmVjdGlvblN0YXR1c0luZm8gfCBudWxsPihudWxsKTtcbiAgY29uc3QgW2lzTG9hZGluZ1N0YXR1cywgc2V0SXNMb2FkaW5nU3RhdHVzXSA9IHVzZVN0YXRlPGJvb2xlYW4+KHRydWUpO1xuXG4gIGNvbnN0IFtmaWxlcywgc2V0RmlsZXNdID0gdXNlU3RhdGU8RmlsZUxpc3RJdGVtW10+KFtdKTtcbiAgY29uc3QgW2N1cnJlbnRGb2xkZXJJZCwgc2V0Q3VycmVudEZvbGRlcklkXSA9IHVzZVN0YXRlPHN0cmluZyB8IHVuZGVmaW5lZD4odW5kZWZpbmVkKTsgLy8gdW5kZWZpbmVkIGZvciByb290XG4gIGNvbnN0IFtuZXh0UGFnZVRva2VuLCBzZXROZXh0UGFnZVRva2VuXSA9IHVzZVN0YXRlPHN0cmluZyB8IHVuZGVmaW5lZD4odW5kZWZpbmVkKTtcbiAgY29uc3QgW2lzTG9hZGluZ0ZpbGVzLCBzZXRJc0xvYWRpbmdGaWxlc10gPSB1c2VTdGF0ZTxib29sZWFuPihmYWxzZSk7XG4gIGNvbnN0IFtwYXRoSGlzdG9yeSwgc2V0UGF0aEhpc3RvcnldID0gdXNlU3RhdGU8UGF0aEhpc3RvcnlJdGVtW10+KFt7IG5hbWU6IFwiTXkgRHJpdmVcIiwgaWQ6IHVuZGVmaW5lZCB9XSk7XG5cbiAgY29uc3QgW2Vycm9yTWVzc2FnZXMsIHNldEVycm9yTWVzc2FnZXNdID0gdXNlU3RhdGU8eyBnZW5lcmFsPzogc3RyaW5nOyBmaWxlcz86IHN0cmluZzsgc3RhdHVzPzogc3RyaW5nIH0+KHt9KTtcblxuICAvLyBBUEkgZnVuY3Rpb25zIGFyZSBub3cgaW1wb3J0ZWQgZnJvbSBnZHJpdmVTa2lsbHMudHNcbiAgLy8gTW9jayBmdW5jdGlvbnMgYmVsb3cgYXJlIHJlbW92ZWQuXG5cbiAgY29uc3QgZmV0Y2hDb25uZWN0aW9uU3RhdHVzID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgIGlmICghdXNlcklkKSByZXR1cm47XG4gICAgc2V0SXNMb2FkaW5nU3RhdHVzKHRydWUpO1xuICAgIHNldEVycm9yTWVzc2FnZXMocHJldiA9PiAoeyAuLi5wcmV2LCBzdGF0dXM6IHVuZGVmaW5lZCB9KSk7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZ2V0R0RyaXZlQ29ubmVjdGlvblN0YXR1cyh1c2VySWQpO1xuICAgICAgaWYgKHJlc3BvbnNlLm9rICYmIHJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgc2V0Q29ubmVjdGlvblN0YXR1cyhyZXNwb25zZS5kYXRhKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNldENvbm5lY3Rpb25TdGF0dXMoeyBpc0Nvbm5lY3RlZDogZmFsc2UsIHJlYXNvbjogcmVzcG9uc2UuZXJyb3I/Lm1lc3NhZ2UgfHwgJ0ZhaWxlZCB0byBnZXQgc3RhdHVzJyB9KTtcbiAgICAgICAgc2V0RXJyb3JNZXNzYWdlcyhwcmV2ID0+ICh7IC4uLnByZXYsIHN0YXR1czogcmVzcG9uc2UuZXJyb3I/Lm1lc3NhZ2UgfHwgJ0ZhaWxlZCB0byBnZXQgc3RhdHVzJyB9KSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgc2V0Q29ubmVjdGlvblN0YXR1cyh7IGlzQ29ubmVjdGVkOiBmYWxzZSwgcmVhc29uOiAnRXhjZXB0aW9uIHdoaWxlIGZldGNoaW5nIHN0YXR1cycgfSk7XG4gICAgICBzZXRFcnJvck1lc3NhZ2VzKHByZXYgPT4gKHsgLi4ucHJldiwgc3RhdHVzOiBlcnJvci5tZXNzYWdlIHx8ICdFeGNlcHRpb24gd2hpbGUgZmV0Y2hpbmcgc3RhdHVzJyB9KSk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHNldElzTG9hZGluZ1N0YXR1cyhmYWxzZSk7XG4gICAgfVxuICB9LCBbdXNlcklkXSk7XG5cbiAgY29uc3QgaGFuZGxlQ29ubmVjdEdEcml2ZSA9ICgpID0+IHtcbiAgICBpZiAoIXVzZXJJZCkge1xuICAgICAgc2V0RXJyb3JNZXNzYWdlcyhwcmV2ID0+ICh7IC4uLnByZXYsIGdlbmVyYWw6IFwiVXNlciBJRCBpcyBtaXNzaW5nLiBDYW5ub3QgaW5pdGlhdGUgY29ubmVjdGlvbi5cIn0pKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gVGhpcyB3aWxsIGJlIGEgcmVkaXJlY3QgdG8gdGhlIGJhY2tlbmQgT0F1dGggaW5pdGlhdGlvbiBVUkxcbiAgICAvLyBUaGUgYmFja2VuZCB3aWxsIHRoZW4gcmVkaXJlY3QgdG8gR29vZ2xlLCBhbmQgR29vZ2xlIHdpbGwgcmVkaXJlY3QgYmFjayB0byBhIGNhbGxiYWNrIFVSTC5cbiAgICAvLyBFbnN1cmUgdGhpcyBjYWxsYmFjayBVUkwgZXZlbnR1YWxseSBsZWFkcyB0aGUgdXNlciBiYWNrIHRvIHRoaXMgc2V0dGluZ3MgcGFnZSxcbiAgICAvLyBwZXJoYXBzIHdpdGggcXVlcnkgcGFyYW1zIGluZGljYXRpbmcgc3VjY2Vzcy9mYWlsdXJlLlxuICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gYC9hcGkvYXV0aC9nZHJpdmUvaW5pdGlhdGU/dXNlcl9pZD0ke3VzZXJJZH1gO1xuICB9O1xuXG4gIGNvbnN0IGhhbmRsZURpc2Nvbm5lY3RHRHJpdmUgPSB1c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgaWYgKCF1c2VySWQpIHJldHVybjtcbiAgICAvLyBPcHRpb25hbGx5LCBhZGQgYSBjb25maXJtYXRpb24gZGlhbG9nIGhlcmVcbiAgICBzZXRFcnJvck1lc3NhZ2VzKHByZXYgPT4gKHsgLi4ucHJldiwgZ2VuZXJhbDogdW5kZWZpbmVkIH0pKTtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBkaXNjb25uZWN0R0RyaXZlKHVzZXJJZCk7XG4gICAgICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICAgICAgYXdhaXQgZmV0Y2hDb25uZWN0aW9uU3RhdHVzKCk7IC8vIFJlZnJlc2ggc3RhdHVzXG4gICAgICAgIHNldEZpbGVzKFtdKTtcbiAgICAgICAgc2V0TmV4dFBhZ2VUb2tlbih1bmRlZmluZWQpO1xuICAgICAgICBzZXRDdXJyZW50Rm9sZGVySWQodW5kZWZpbmVkKTtcbiAgICAgICAgc2V0UGF0aEhpc3RvcnkoW3sgbmFtZTogXCJNeSBEcml2ZVwiLCBpZDogdW5kZWZpbmVkIH1dKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNldEVycm9yTWVzc2FnZXMocHJldiA9PiAoeyAuLi5wcmV2LCBnZW5lcmFsOiByZXNwb25zZS5lcnJvcj8ubWVzc2FnZSB8fCAnRmFpbGVkIHRvIGRpc2Nvbm5lY3QnIH0pKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICBzZXRFcnJvck1lc3NhZ2VzKHByZXYgPT4gKHsgLi4ucHJldiwgZ2VuZXJhbDogZXJyb3IubWVzc2FnZSB8fCAnRXhjZXB0aW9uIGR1cmluZyBkaXNjb25uZWN0JyB9KSk7XG4gICAgfVxuICB9LCBbdXNlcklkLCBmZXRjaENvbm5lY3Rpb25TdGF0dXNdKTtcblxuICBjb25zdCBmZXRjaEZpbGVzID0gdXNlQ2FsbGJhY2soYXN5bmMgKHRhcmdldEZvbGRlcklkPzogc3RyaW5nLCBwYWdlVG9rZW4/OiBzdHJpbmcsIGlzTG9hZE1vcmUgPSBmYWxzZSkgPT4ge1xuICAgIGlmICghdXNlcklkIHx8ICFjb25uZWN0aW9uU3RhdHVzPy5pc0Nvbm5lY3RlZCkgcmV0dXJuO1xuXG4gICAgc2V0SXNMb2FkaW5nRmlsZXModHJ1ZSk7XG4gICAgaWYgKCFpc0xvYWRNb3JlKSB7IC8vIElmIG5vdCBsb2FkaW5nIG1vcmUsIGl0J3MgYSBuZXcgZm9sZGVyIG9yIHJlZnJlc2hcbiAgICAgICAgc2V0RmlsZXMoW10pOyAvLyBDbGVhciBwcmV2aW91cyBmaWxlcyBmb3IgdGhlIG5ldyBmb2xkZXJcbiAgICAgICAgc2V0RXJyb3JNZXNzYWdlcyhwcmV2ID0+ICh7IC4uLnByZXYsIGZpbGVzOiB1bmRlZmluZWQgfSkpO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGxpc3RHb29nbGVEcml2ZUZpbGVzKHVzZXJJZCwgdGFyZ2V0Rm9sZGVySWQsIHBhZ2VUb2tlbiwgdW5kZWZpbmVkLCAyMCk7IC8vIHBhZ2VTaXplIDIwIGV4YW1wbGVcbiAgICAgIGlmIChyZXNwb25zZS5vayAmJiByZXNwb25zZS5kYXRhKSB7XG4gICAgICAgIGNvbnN0IG5ld0ZpbGVzID0gcmVzcG9uc2UuZGF0YS5maWxlcy5tYXAoKGY6IEdEcml2ZUZpbGUpID0+ICh7IC4uLmYsIGlzSW5nZXN0aW5nOiBmYWxzZSwgaW5nZXN0aW9uU3RhdHVzOiBudWxsLCBpbmdlc3Rpb25NZXNzYWdlOiB1bmRlZmluZWQgfSkgYXMgRmlsZUxpc3RJdGVtKTtcbiAgICAgICAgc2V0RmlsZXMocHJldiA9PiBpc0xvYWRNb3JlID8gWy4uLnByZXYsIC4uLm5ld0ZpbGVzXSA6IG5ld0ZpbGVzKTtcbiAgICAgICAgc2V0TmV4dFBhZ2VUb2tlbihyZXNwb25zZS5kYXRhLm5leHRQYWdlVG9rZW4pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2V0RXJyb3JNZXNzYWdlcyhwcmV2ID0+ICh7IC4uLnByZXYsIGZpbGVzOiByZXNwb25zZS5lcnJvcj8ubWVzc2FnZSB8fCAnRmFpbGVkIHRvIGxvYWQgZmlsZXMnIH0pKTtcbiAgICAgICAgaWYgKCFpc0xvYWRNb3JlKSBzZXRGaWxlcyhbXSk7IC8vIENsZWFyIGZpbGVzIG9uIGVycm9yIGlmIGl0IHdhcyBhIGZyZXNoIGxvYWRcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICBzZXRFcnJvck1lc3NhZ2VzKHByZXYgPT4gKHsgLi4ucHJldiwgZmlsZXM6IGVycm9yLm1lc3NhZ2UgfHwgJ0V4Y2VwdGlvbiB3aGlsZSBsb2FkaW5nIGZpbGVzJyB9KSk7XG4gICAgICBpZiAoIWlzTG9hZE1vcmUpIHNldEZpbGVzKFtdKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgc2V0SXNMb2FkaW5nRmlsZXMoZmFsc2UpO1xuICAgIH1cbiAgfSwgW3VzZXJJZCwgY29ubmVjdGlvblN0YXR1cz8uaXNDb25uZWN0ZWRdKTsgLy8gUmVtb3ZlZCAnZmlsZXMnIGZyb20gZGVwIGFycmF5IHRvIHByZXZlbnQgbG9vcHMgb24gc2V0RmlsZXMgd2l0aGluXG5cbiAgY29uc3QgaGFuZGxlSW5nZXN0RmlsZSA9IHVzZUNhbGxiYWNrKGFzeW5jIChmaWxlOiBGaWxlTGlzdEl0ZW0pID0+IHtcbiAgICBpZiAoIXVzZXJJZCkgcmV0dXJuO1xuXG4gICAgc2V0RmlsZXMocHJldkZpbGVzID0+IHByZXZGaWxlcy5tYXAoZiA9PiBmLmlkID09PSBmaWxlLmlkID8geyAuLi5mLCBpc0luZ2VzdGluZzogdHJ1ZSwgaW5nZXN0aW9uU3RhdHVzOiBudWxsLCBpbmdlc3Rpb25NZXNzYWdlOiB1bmRlZmluZWQgfSA6IGYpKTtcbiAgICBzZXRFcnJvck1lc3NhZ2VzKHByZXYgPT4gKHsgLi4ucHJldiwgZ2VuZXJhbDogdW5kZWZpbmVkIH0pKTtcblxuICAgIHRyeSB7XG4gICAgICAvLyBUaGUgd2ViVmlld0xpbmsgbWlnaHQgbm90IGJlIGF2YWlsYWJsZSBmcm9tIGxpc3QtZmlsZXMuXG4gICAgICAvLyBJZiBpdCdzIGNydWNpYWwgZm9yIGluZ2VzdGlvbiAoZS5nLiBhcyBzb3VyY2VfdXJpKSxcbiAgICAgIC8vIGl0IG1pZ2h0IG5lZWQgdG8gYmUgZmV0Y2hlZCB2aWEgZ2V0R29vZ2xlRHJpdmVGaWxlTWV0YWRhdGEgZmlyc3QsXG4gICAgICAvLyBvciB0aGUgYmFja2VuZCdzIC9hcGkvaW5nZXN0LWdkcml2ZS1kb2N1bWVudCBuZWVkcyB0byBiZSByb2J1c3QgZW5vdWdoXG4gICAgICAvLyB0byBjb25zdHJ1Y3QgYSBzb3VyY2VfdXJpIGZyb20ganVzdCB0aGUgZmlsZSBJRCBpZiB3ZWJWaWV3TGluayBpcyBtaXNzaW5nLlxuICAgICAgLy8gRm9yIHRoaXMgY29uY2VwdHVhbCBzdGVwLCB3ZSBhc3N1bWUgb3JpZ2luYWxGaWxlTWV0YWRhdGEgY2FuIGJlIGNvbnN0cnVjdGVkIGFkZXF1YXRlbHkuXG4gICAgICBjb25zdCBtZXRhZGF0YUZvckluZ2VzdGlvbiA9IHtcbiAgICAgICAgbmFtZTogZmlsZS5uYW1lLFxuICAgICAgICBtaW1lVHlwZTogZmlsZS5taW1lVHlwZSxcbiAgICAgICAgd2ViVmlld0xpbms6IGZpbGUud2ViVmlld0xpbmsgfHwgdW5kZWZpbmVkLCAvLyBQYXNzIHdlYlZpZXdMaW5rIGlmIGF2YWlsYWJsZVxuICAgICAgfTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0cmlnZ2VyR29vZ2xlRHJpdmVGaWxlSW5nZXN0aW9uKHVzZXJJZCwgZmlsZS5pZCwgbWV0YWRhdGFGb3JJbmdlc3Rpb24pO1xuXG4gICAgICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICAgICAgc2V0RmlsZXMocHJldkZpbGVzID0+IHByZXZGaWxlcy5tYXAoZiA9PiBmLmlkID09PSBmaWxlLmlkID8geyAuLi5mLCBpc0luZ2VzdGluZzogZmFsc2UsIGluZ2VzdGlvblN0YXR1czogJ3N1Y2Nlc3MnLCBpbmdlc3Rpb25NZXNzYWdlOiAnSW5nZXN0aW9uIHN0YXJ0ZWQuJyB9IDogZikpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2V0RmlsZXMocHJldkZpbGVzID0+IHByZXZGaWxlcy5tYXAoZiA9PiBmLmlkID09PSBmaWxlLmlkID8geyAuLi5mLCBpc0luZ2VzdGluZzogZmFsc2UsIGluZ2VzdGlvblN0YXR1czogJ2Vycm9yJywgaW5nZXN0aW9uTWVzc2FnZTogcmVzcG9uc2UuZXJyb3I/Lm1lc3NhZ2UgfHwgXCJJbmdlc3Rpb24gZmFpbGVkLlwiIH0gOiBmKSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgc2V0RmlsZXMocHJldkZpbGVzID0+IHByZXZGaWxlcy5tYXAoZiA9PiBmLmlkID09PSBmaWxlLmlkID8geyAuLi5mLCBpc0luZ2VzdGluZzogZmFsc2UsIGluZ2VzdGlvblN0YXR1czogJ2Vycm9yJywgaW5nZXN0aW9uTWVzc2FnZTogZXJyb3IubWVzc2FnZSB8fCBcIkV4Y2VwdGlvbiBkdXJpbmcgaW5nZXN0aW9uLlwiIH0gOiBmKSk7XG4gICAgfVxuICB9LCBbdXNlcklkXSk7XG5cbiAgLy8gLS0tIEVmZmVjdCBIb29rcyAtLS1cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBGZXRjaCBpbml0aWFsIGNvbm5lY3Rpb24gc3RhdHVzIHdoZW4gdXNlcklkIGlzIGF2YWlsYWJsZVxuICAgIGlmICh1c2VySWQpIHtcbiAgICAgIGZldGNoQ29ubmVjdGlvblN0YXR1cygpO1xuICAgIH1cbiAgfSwgW3VzZXJJZCwgZmV0Y2hDb25uZWN0aW9uU3RhdHVzXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBGZXRjaCBmaWxlcyB3aGVuIGNvbm5lY3Rpb24gaXMgZXN0YWJsaXNoZWQgb3IgY3VycmVudEZvbGRlcklkIGNoYW5nZXNcbiAgICBpZiAoY29ubmVjdGlvblN0YXR1cz8uaXNDb25uZWN0ZWQgJiYgdXNlcklkKSB7XG4gICAgICBmZXRjaEZpbGVzKGN1cnJlbnRGb2xkZXJJZCwgdW5kZWZpbmVkLCBmYWxzZSk7IC8vIGZhbHNlIGZvciBpc0xvYWRNb3JlIGluZGljYXRlcyBuZXcgZm9sZGVyIGxvYWRcbiAgICB9IGVsc2UgaWYgKCFjb25uZWN0aW9uU3RhdHVzPy5pc0Nvbm5lY3RlZCkgeyAvLyBDbGVhciBmaWxlcyBpZiBjb25uZWN0aW9uIGlzIGxvc3Qgb3Igbm90IHByZXNlbnRcbiAgICAgIHNldEZpbGVzKFtdKTtcbiAgICAgIHNldE5leHRQYWdlVG9rZW4odW5kZWZpbmVkKTtcbiAgICAgIHNldFBhdGhIaXN0b3J5KFt7IG5hbWU6IFwiTXkgRHJpdmVcIiwgaWQ6IHVuZGVmaW5lZCB9XSk7XG4gICAgfVxuICAgIC8vIERlcGVuZGVuY3k6IGZldGNoRmlsZXMgaXMgdXNlQ2FsbGJhY2sgd3JhcHBlZC5cbiAgfSwgW2Nvbm5lY3Rpb25TdGF0dXM/LmlzQ29ubmVjdGVkLCBjdXJyZW50Rm9sZGVySWQsIHVzZXJJZCwgZmV0Y2hGaWxlc10pO1xuXG4gIC8vIC0tLSBFdmVudCBIYW5kbGVycyAtLS1cbiAgY29uc3QgaGFuZGxlRmlsZUNsaWNrID0gKGZpbGU6IEZpbGVMaXN0SXRlbSkgPT4ge1xuICAgIGlmIChmaWxlLm1pbWVUeXBlID09PSAnYXBwbGljYXRpb24vdm5kLmdvb2dsZS1hcHBzLmZvbGRlcicpIHtcbiAgICAgIC8vIE5hdmlnYXRlIGludG8gZm9sZGVyXG4gICAgICAvLyBBdm9pZCBhZGRpbmcgZHVwbGljYXRlIGlmIHBhdGggYWxyZWFkeSBleGlzdHMgKGUuZy4gdXNlciBjbGlja3MgYmFjayB0aGVuIGZvcndhcmQpXG4gICAgICBjb25zdCBleGlzdGluZ1BhdGhJdGVtID0gcGF0aEhpc3RvcnkuZmluZChwID0+IHAuaWQgPT09IGZpbGUuaWQpO1xuICAgICAgaWYgKGV4aXN0aW5nUGF0aEl0ZW0pIHtcbiAgICAgICAgICBjb25zdCBleGlzdGluZ0luZGV4ID0gcGF0aEhpc3RvcnkuZmluZEluZGV4KHAgPT4gcC5pZCA9PT0gZmlsZS5pZCk7XG4gICAgICAgICAgc2V0UGF0aEhpc3RvcnkocHJldiA9PiBwcmV2LnNsaWNlKDAsIGV4aXN0aW5nSW5kZXggKyAxKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNldFBhdGhIaXN0b3J5KHByZXYgPT4gWy4uLnByZXYsIHsgaWQ6IGZpbGUuaWQsIG5hbWU6IGZpbGUubmFtZSB9XSk7XG4gICAgICB9XG4gICAgICBzZXRDdXJyZW50Rm9sZGVySWQoZmlsZS5pZCk7XG4gICAgICAvLyBmZXRjaEZpbGVzIHdpbGwgYmUgdHJpZ2dlcmVkIGJ5IHVzZUVmZmVjdCB3YXRjaGluZyBjdXJyZW50Rm9sZGVySWRcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gUG90ZW50aWFsbHkgc2hvdyBmaWxlIGRldGFpbHMgb3IgY29udGV4dCBtZW51IGZvciBub24tZm9sZGVyIGl0ZW1zXG4gICAgICBjb25zb2xlLmxvZyhcIlNlbGVjdGVkIGZpbGUgKG5vbi1mb2xkZXIpOlwiLCBmaWxlLm5hbWUpO1xuICAgICAgLy8gQ291bGQgYWRkIGxvZ2ljIGhlcmUgdG8gc2VsZWN0IHRoZSBmaWxlIGZvciBhbiBhY3Rpb24gbGlrZSBcInZpZXcgZGV0YWlsc1wiXG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGhhbmRsZUJyZWFkY3J1bWJDbGljayA9IChpbmRleDogbnVtYmVyKSA9PiB7XG4gICAgY29uc3QgbmV3UGF0aCA9IHBhdGhIaXN0b3J5LnNsaWNlKDAsIGluZGV4ICsgMSk7XG4gICAgc2V0UGF0aEhpc3RvcnkobmV3UGF0aCk7XG4gICAgc2V0Q3VycmVudEZvbGRlcklkKHBhdGhIaXN0b3J5W2luZGV4XS5pZCk7XG4gICAgLy8gZmV0Y2hGaWxlcyB3aWxsIGJlIHRyaWdnZXJlZCBieSB1c2VFZmZlY3Qgd2F0Y2hpbmcgY3VycmVudEZvbGRlcklkXG4gIH07XG5cbiAgLy8gaGFuZGxlQ29ubmVjdEdEcml2ZSwgaGFuZGxlRGlzY29ubmVjdEdEcml2ZSwgaGFuZGxlSW5nZXN0RmlsZSBhcmUgYWxyZWFkeSBkZWZpbmVkIHdpdGggQVBJIGxvZ2ljLlxuXG4gIC8vIC0tLSBSZW5kZXIgTG9naWMgKEJhc2ljIFN0cnVjdHVyZSB3aXRoIFBsYWNlaG9sZGVycyBhbmQgQ29tbWVudHMpIC0tLVxuICByZXR1cm4gKFxuICAgIDxkaXYgc3R5bGU9e3sgZm9udEZhbWlseTogJ0FyaWFsLCBzYW5zLXNlcmlmJywgcGFkZGluZzogJzIwcHgnLCBtYXhXaWR0aDogJzgwMHB4JywgbWFyZ2luOiAnYXV0bycsIGJvcmRlcjogJzFweCBzb2xpZCAjZTBlMGUwJywgYm9yZGVyUmFkaXVzOiAnOHB4JywgYm94U2hhZG93OiAnMCAycHggNHB4IHJnYmEoMCwwLDAsMC4xKScgfX0+XG4gICAgICA8aDIgc3R5bGU9e3sgYm9yZGVyQm90dG9tOiAnMXB4IHNvbGlkICNlZWUnLCBwYWRkaW5nQm90dG9tOiAnMTBweCcsIG1hcmdpbkJvdHRvbTogJzIwcHgnIH19Pkdvb2dsZSBEcml2ZSBNYW5hZ2VtZW50PC9oMj5cblxuICAgICAgey8qIEdlbmVyYWwgRXJyb3IgRGlzcGxheSAqL31cbiAgICAgIHtlcnJvck1lc3NhZ2VzLmdlbmVyYWwgJiYgKFxuICAgICAgICA8cCBzdHlsZT17eyBjb2xvcjogJ3JlZCcsIGJhY2tncm91bmRDb2xvcjogJyNmZmViZWUnLCBwYWRkaW5nOiAnMTBweCcsIGJvcmRlclJhZGl1czogJzRweCcsIGJvcmRlcjogJzFweCBzb2xpZCAjZTU3MzczJywgbWFyZ2luQm90dG9tOiAnMTVweCcgfX0+XG4gICAgICAgICAgPHN0cm9uZz5FcnJvcjo8L3N0cm9uZz4ge2Vycm9yTWVzc2FnZXMuZ2VuZXJhbH1cbiAgICAgICAgPC9wPlxuICAgICAgKX1cblxuICAgICAgey8qIENvbm5lY3Rpb24gU3RhdHVzIFNlY3Rpb24gKi99XG4gICAgICA8ZGl2IHN0eWxlPXt7IG1hcmdpbkJvdHRvbTogJzIwcHgnLCBwYWRkaW5nOiAnMTVweCcsIGJvcmRlcjogJzFweCBzb2xpZCAjY2NjJywgYm9yZGVyUmFkaXVzOiAnNXB4JywgYmFja2dyb3VuZENvbG9yOiAnI2Y5ZjlmOScgfX0+XG4gICAgICAgIDxoMyBzdHlsZT17eyBtYXJnaW5Ub3A6ICcwJywgbWFyZ2luQm90dG9tOiAnMTBweCcsIGJvcmRlckJvdHRvbTogJzFweCBzb2xpZCAjZWVlJywgcGFkZGluZ0JvdHRvbTogJzhweCcgfX0+Q29ubmVjdGlvbiBTdGF0dXM8L2gzPlxuICAgICAgICB7aXNMb2FkaW5nU3RhdHVzID8gKFxuICAgICAgICAgIDxwPkxvYWRpbmcgc3RhdHVzLi4uPC9wPlxuICAgICAgICApIDogY29ubmVjdGlvblN0YXR1cz8uaXNDb25uZWN0ZWQgPyAoXG4gICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgIDxwIHN0eWxlPXt7IGNvbG9yOiAnZ3JlZW4nLCBmb250V2VpZ2h0OiAnYm9sZCcsIG1hcmdpbkJvdHRvbTogJzEwcHgnIH19PlxuICAgICAgICAgICAgICBDb25uZWN0ZWQgYXM6IHtjb25uZWN0aW9uU3RhdHVzLmVtYWlsIHx8ICdOL0EnfVxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVEaXNjb25uZWN0R0RyaXZlfVxuICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6ICc4cHggMTVweCcsXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnI2Y0NDMzNicsIC8vIFJlZFxuICAgICAgICAgICAgICAgIGNvbG9yOiAnd2hpdGUnLFxuICAgICAgICAgICAgICAgIGJvcmRlcjogJ25vbmUnLFxuICAgICAgICAgICAgICAgIGJvcmRlclJhZGl1czogJzRweCcsXG4gICAgICAgICAgICAgICAgY3Vyc29yOiAncG9pbnRlcicsXG4gICAgICAgICAgICAgICAgZm9udFNpemU6ICcwLjllbSdcbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgRGlzY29ubmVjdCBHb29nbGUgRHJpdmVcbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApIDogKFxuICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICA8cCBzdHlsZT17eyBjb2xvcjogJyNmNTdjMDAnLCBmb250V2VpZ2h0OiAnYm9sZCcsIG1hcmdpbkJvdHRvbTogJzVweCcgfX0+IHsvKiBPcmFuZ2UgZm9yIE5vdCBDb25uZWN0ZWQgKi99XG4gICAgICAgICAgICAgIE5vdCBDb25uZWN0ZWQuXG4gICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICB7Y29ubmVjdGlvblN0YXR1cz8ucmVhc29uICYmIChcbiAgICAgICAgICAgICAgPHAgc3R5bGU9e3tmb250U2l6ZTogJzAuOWVtJywgY29sb3I6ICcjNzU3NTc1JywgbWFyZ2luVG9wOiAnMCcsIG1hcmdpbkJvdHRvbTogJzEwcHgnfX0+XG4gICAgICAgICAgICAgICAgUmVhc29uOiB7Y29ubmVjdGlvblN0YXR1cy5yZWFzb259XG4gICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICB7ZXJyb3JNZXNzYWdlcy5zdGF0dXMgJiYgKFxuICAgICAgICAgICAgICA8cCBzdHlsZT17eyBjb2xvcjogJ3JlZCcsIGZvbnRTaXplOiAnMC45ZW0nLCBtYXJnaW5Ub3A6ICcwJywgbWFyZ2luQm90dG9tOiAnMTBweCcgfX0+XG4gICAgICAgICAgICAgICAgRXJyb3IgZmV0Y2hpbmcgc3RhdHVzOiB7ZXJyb3JNZXNzYWdlcy5zdGF0dXN9XG4gICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZUNvbm5lY3RHRHJpdmV9XG4gICAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogJzhweCAxNXB4JyxcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjNENBRjUwJywgLy8gR3JlZW5cbiAgICAgICAgICAgICAgICBjb2xvcjogJ3doaXRlJyxcbiAgICAgICAgICAgICAgICBib3JkZXI6ICdub25lJyxcbiAgICAgICAgICAgICAgICBib3JkZXJSYWRpdXM6ICc0cHgnLFxuICAgICAgICAgICAgICAgIGN1cnNvcjogJ3BvaW50ZXInLFxuICAgICAgICAgICAgICAgIGZvbnRTaXplOiAnMC45ZW0nXG4gICAgICAgICAgICAgIH19XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIENvbm5lY3QgR29vZ2xlIERyaXZlXG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKX1cbiAgICAgIDwvZGl2PlxuXG4gICAgICB7LyogRmlsZSBFeHBsb3JlciBTZWN0aW9uIC0gT25seSBzaG93IGlmIGNvbm5lY3RlZCAqL31cbiAgICAgIHtjb25uZWN0aW9uU3RhdHVzPy5pc0Nvbm5lY3RlZCAmJiAoXG4gICAgICAgIDxkaXYgc3R5bGU9e3sgbWFyZ2luVG9wOiAnMjBweCcsIHBhZGRpbmc6ICcxNXB4JywgYm9yZGVyOiAnMXB4IHNvbGlkICNjY2MnLCBib3JkZXJSYWRpdXM6ICc1cHgnLCBiYWNrZ3JvdW5kQ29sb3I6ICcjZjlmOWY5JyB9fT5cbiAgICAgICAgICA8aDMgc3R5bGU9e3sgbWFyZ2luVG9wOiAnMCcsIG1hcmdpbkJvdHRvbTogJzEwcHgnLCBib3JkZXJCb3R0b206ICcxcHggc29saWQgI2VlZScsIHBhZGRpbmdCb3R0b206ICc4cHgnIH19PkZpbGVzIGFuZCBGb2xkZXJzPC9oMz5cblxuICAgICAgICAgIHsvKiBCcmVhZGNydW1icyAqL31cbiAgICAgICAgICA8ZGl2IHN0eWxlPXt7IG1hcmdpbkJvdHRvbTogJzEwcHgnLCBwYWRkaW5nOiAnOHB4JywgYmFja2dyb3VuZENvbG9yOiAnI2YwZjBmMCcsIGJvcmRlclJhZGl1czogJzRweCcsIGRpc3BsYXk6ICdmbGV4JywgZmxleFdyYXA6ICd3cmFwJywgYWxpZ25JdGVtczogJ2NlbnRlcicgfX0+XG4gICAgICAgICAgICB7cGF0aEhpc3RvcnkubWFwKChwLCBpbmRleCkgPT4gKFxuICAgICAgICAgICAgICA8UmVhY3QuRnJhZ21lbnQga2V5PXtwLmlkIHx8ICdyb290LWJyZWFkY3J1bWInfT5cbiAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBoYW5kbGVCcmVhZGNydW1iQ2xpY2soaW5kZXgpfVxuICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2luZGV4ID09PSBwYXRoSGlzdG9yeS5sZW5ndGggLSAxfVxuICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogJ25vbmUnLCBib3JkZXI6ICdub25lJyxcbiAgICAgICAgICAgICAgICAgICAgY29sb3I6IGluZGV4ID09PSBwYXRoSGlzdG9yeS5sZW5ndGggLSAxID8gJyMzMzMnIDogJyMwMDdiZmYnLFxuICAgICAgICAgICAgICAgICAgICBjdXJzb3I6IGluZGV4ID09PSBwYXRoSGlzdG9yeS5sZW5ndGggLSAxID8gJ2RlZmF1bHQnIDogJ3BvaW50ZXInLFxuICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAnMnB4IDAnLCAvLyBBZGp1c3RlZCBwYWRkaW5nXG4gICAgICAgICAgICAgICAgICAgIG1hcmdpblJpZ2h0OiAnNXB4JyxcbiAgICAgICAgICAgICAgICAgICAgZm9udFdlaWdodDogaW5kZXggPT09IHBhdGhIaXN0b3J5Lmxlbmd0aCAtIDEgPyAnYm9sZCcgOiAnbm9ybWFsJyxcbiAgICAgICAgICAgICAgICAgICAgdGV4dERlY29yYXRpb246IGluZGV4ICE9PSBwYXRoSGlzdG9yeS5sZW5ndGggLSAxID8gJ3VuZGVybGluZScgOiAnbm9uZScsXG4gICAgICAgICAgICAgICAgICAgIGZvbnRTaXplOiAnMC45NWVtJ1xuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICB7cC5uYW1lfVxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIHtpbmRleCA8IHBhdGhIaXN0b3J5Lmxlbmd0aCAtIDEgJiYgPHNwYW4gc3R5bGU9e3sgbWFyZ2luOiAnMCA1cHgnLCBjb2xvcjogJyM2NjYnIH19Pi88L3NwYW4+fVxuICAgICAgICAgICAgICA8L1JlYWN0LkZyYWdtZW50PlxuICAgICAgICAgICAgKSl9XG4gICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICB7ZXJyb3JNZXNzYWdlcy5maWxlcyAmJiAoXG4gICAgICAgICAgICA8cCBzdHlsZT17eyBjb2xvcjogJ3JlZCcsIGJhY2tncm91bmRDb2xvcjogJyNmZmViZWUnLCBwYWRkaW5nOiAnMTBweCcsIGJvcmRlclJhZGl1czogJzRweCcsIGJvcmRlcjogJzFweCBzb2xpZCAjZTU3MzczJywgbWFyZ2luQm90dG9tOiAnMTBweCcgfX0+XG4gICAgICAgICAgICAgIDxzdHJvbmc+RXJyb3IgbG9hZGluZyBmaWxlczo8L3N0cm9uZz4ge2Vycm9yTWVzc2FnZXMuZmlsZXN9XG4gICAgICAgICAgICA8L3A+XG4gICAgICAgICAgKX1cblxuICAgICAgICAgIHtpc0xvYWRpbmdGaWxlcyAmJiBmaWxlcy5sZW5ndGggPT09IDAgPyAoXG4gICAgICAgICAgICA8cD5Mb2FkaW5nIGZpbGVzLi4uPC9wPlxuICAgICAgICAgICkgOiBmaWxlcy5sZW5ndGggPT09IDAgJiYgIWlzTG9hZGluZ0ZpbGVzID8gKFxuICAgICAgICAgICAgPHAgc3R5bGU9e3sgZm9udFN0eWxlOiAnaXRhbGljJywgY29sb3I6ICcjNzU3NTc1JywgcGFkZGluZzogJzEwcHggMCcgfX0+Tm8gZmlsZXMgb3IgZm9sZGVycyBmb3VuZCBpbiB0aGlzIGxvY2F0aW9uLjwvcD5cbiAgICAgICAgICApIDogKFxuICAgICAgICAgICAgPHVsIHN0eWxlPXt7IGxpc3RTdHlsZVR5cGU6ICdub25lJywgcGFkZGluZ0xlZnQ6ICcwJywgbWFyZ2luOiAnMCcgfX0+XG4gICAgICAgICAgICAgIHtmaWxlcy5tYXAoZmlsZSA9PiAoXG4gICAgICAgICAgICAgICAgPGxpXG4gICAgICAgICAgICAgICAgICBrZXk9e2ZpbGUuaWR9XG4gICAgICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAnMTBweCA1cHgnLFxuICAgICAgICAgICAgICAgICAgICBib3JkZXJCb3R0b206ICcxcHggc29saWQgI2VlZScsXG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgICAgICAgICAgICAgICAganVzdGlmeUNvbnRlbnQ6ICdzcGFjZS1iZXR3ZWVuJyxcbiAgICAgICAgICAgICAgICAgICAgYWxpZ25JdGVtczogJ2NlbnRlcicsXG4gICAgICAgICAgICAgICAgICAgIGN1cnNvcjogZmlsZS5taW1lVHlwZSA9PT0gJ2FwcGxpY2F0aW9uL3ZuZC5nb29nbGUtYXBwcy5mb2xkZXInID8gJ3BvaW50ZXInIDogJ2RlZmF1bHQnLFxuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpbGUubWltZVR5cGUgPT09ICdhcHBsaWNhdGlvbi92bmQuZ29vZ2xlLWFwcHMuZm9sZGVyJykge1xuICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZUZpbGVDbGljayhmaWxlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIHRpdGxlPXtmaWxlLm1pbWVUeXBlID09PSAnYXBwbGljYXRpb24vdm5kLmdvb2dsZS1hcHBzLmZvbGRlcicgPyBgT3BlbiBmb2xkZXI6ICR7ZmlsZS5uYW1lfWAgOiBgRmlsZTogJHtmaWxlLm5hbWV9YH1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT17eyBmbGV4R3JvdzogMSwgZGlzcGxheTogJ2ZsZXgnLCBhbGlnbkl0ZW1zOiAnY2VudGVyJyB9fT5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9e3sgbWFyZ2luUmlnaHQ6ICc4cHgnLCBmb250U2l6ZTogJzEuMWVtJyB9fT5cbiAgICAgICAgICAgICAgICAgICAgICB7ZmlsZS5taW1lVHlwZSA9PT0gJ2FwcGxpY2F0aW9uL3ZuZC5nb29nbGUtYXBwcy5mb2xkZXInID8gJ/Cfk4EnIDogJ/Cfk4QnfVxuICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIHtmaWxlLm5hbWV9XG4gICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICB7ZmlsZS5taW1lVHlwZSAhPT0gJ2FwcGxpY2F0aW9uL3ZuZC5nb29nbGUtYXBwcy5mb2xkZXInICYmIChcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17e2Rpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGZsZXhTaHJpbms6IDB9fT5cbiAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoZSkgPT4geyBlLnN0b3BQcm9wYWdhdGlvbigpOyBoYW5kbGVJbmdlc3RGaWxlKGZpbGUpOyB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2ZpbGUuaXNJbmdlc3RpbmcgfHwgZmlsZS5pbmdlc3Rpb25TdGF0dXMgPT09ICdzdWNjZXNzJ31cbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6ICc2cHggMTBweCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbkxlZnQ6ICcxMHB4JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBmaWxlLmluZ2VzdGlvblN0YXR1cyA9PT0gJ3N1Y2Nlc3MnID8gJyNhNWQ2YTcnIDogKGZpbGUuaXNJbmdlc3RpbmcgPyAnIzY0YjVmNicgOiAnIzAwN2JmZicpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogJ3doaXRlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyOiAnbm9uZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlclJhZGl1czogJzRweCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvcjogKGZpbGUuaXNJbmdlc3RpbmcgfHwgZmlsZS5pbmdlc3Rpb25TdGF0dXMgPT09ICdzdWNjZXNzJykgPyAnZGVmYXVsdCcgOiAncG9pbnRlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnRTaXplOiAnMC45ZW0nXG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtmaWxlLmlzSW5nZXN0aW5nID8gJ0luZ2VzdGluZy4uLicgOiAoZmlsZS5pbmdlc3Rpb25TdGF0dXMgPT09ICdzdWNjZXNzJyA/ICdJbmdlc3RlZCcgOiAnSW5nZXN0Jyl9XG4gICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAge2ZpbGUuaW5nZXN0aW9uU3RhdHVzID09PSAnZXJyb3InICYmIDxzbWFsbCBzdHlsZT17eyBjb2xvcjogJ3JlZCcsIG1hcmdpbkxlZnQ6ICc4cHgnLCBmb250U2l6ZTogJzAuODVlbScgfX0+RXJyb3I6IHtmaWxlLmluZ2VzdGlvbk1lc3NhZ2V9PC9zbWFsbD59XG4gICAgICAgICAgICAgICAgICAgICAge2ZpbGUuaW5nZXN0aW9uU3RhdHVzID09PSAnc3VjY2VzcycgJiYgIWZpbGUuaXNJbmdlc3RpbmcgJiYgPHNtYWxsIHN0eWxlPXt7IGNvbG9yOiAnZ3JlZW4nLCBtYXJnaW5MZWZ0OiAnOHB4JywgZm9udFNpemU6ICcwLjg1ZW0nIH19PntmaWxlLmluZ2VzdGlvbk1lc3NhZ2V9PC9zbWFsbD59XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgIDwvdWw+XG4gICAgICAgICAgKX1cblxuICAgICAgICAgIHsvKiBQYWdpbmF0aW9uIEJ1dHRvbiAqL31cbiAgICAgICAgICB7bmV4dFBhZ2VUb2tlbiAmJiAhaXNMb2FkaW5nRmlsZXMgJiYgKFxuICAgICAgICAgICAgPGRpdiBzdHlsZT17e21hcmdpblRvcDogJzE1cHgnLCB0ZXh0QWxpZ246ICdjZW50ZXInfX0+XG4gICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBmZXRjaEZpbGVzKGN1cnJlbnRGb2xkZXJJZCwgbmV4dFBhZ2VUb2tlbiwgdHJ1ZSl9IC8vIHRydWUgZm9yIGlzTG9hZE1vcmVcbiAgICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgICAgcGFkZGluZzogJzhweCAxNXB4JyxcbiAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogJyM2Yzc1N2QnLFxuICAgICAgICAgICAgICAgICAgY29sb3I6ICd3aGl0ZScsXG4gICAgICAgICAgICAgICAgICBib3JkZXI6ICdub25lJyxcbiAgICAgICAgICAgICAgICAgIGJvcmRlclJhZGl1czogJzRweCcsXG4gICAgICAgICAgICAgICAgICBjdXJzb3I6ICdwb2ludGVyJyxcbiAgICAgICAgICAgICAgICAgIGZvbnRTaXplOiAnMC45ZW0nXG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIExvYWQgTW9yZVxuICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICl9XG4gICAgICAgICAge2lzTG9hZGluZ0ZpbGVzICYmIGZpbGVzLmxlbmd0aCA+IDAgJiYgPHAgc3R5bGU9e3ttYXJnaW5Ub3A6ICcxMHB4JywgZm9udFN0eWxlOiAnaXRhbGljJywgY29sb3I6ICcjNzU3NTc1JywgdGV4dEFsaWduOiAnY2VudGVyJ319PkxvYWRpbmcgbW9yZSBmaWxlcy4uLjwvcD59XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cbiAgICA8L2Rpdj5cbiAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IEdEcml2ZU1hbmFnZXI7XG4iXX0=